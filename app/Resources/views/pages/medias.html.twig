{% extends 'base.html.twig' %}

{% block title %}
    {% if app.request.get('_route') == 'medias_populaires' %}
        Médias populaires | {{ nomdusite }}
    {% elseif app.request.get('_route') == 'medias_recents'%}
        Médias récents | {{ nomdusite }}
    {% elseif app.request.get('_route') == 'medias_photo_periode'%}
        Photos {{ app.request.get('periode') | replace({'-': ' '}) }} | {{ nomdusite }}
    {% endif %}
{% endblock %}

{% block body %}

  <h1>
    {% if app.request.get('_route') == 'medias_populaires' %}
      Médias populaires
    {% elseif app.request.get('_route') == 'medias_recents'%}
      Médias récents
    {% elseif app.request.get('_route') == 'medias_photo_periode' %}
      Photos {{ app.request.get('periode') | replace({'-': ' '}) }}
    {% endif %}
  </h1>

    <i>
        {% if app.request.get('_route') == 'medias_populaires' %}
            Médias les plus votés.
        {% elseif app.request.get('_route') == 'medias_recents'%}
            Médias ajoutés récement.
        {% elseif app.request.get('_route') == 'medias_photo_periode'%}
            Photos les plus votées {{ app.request.get('periode') | replace({'-': ' '}) }}. <a href="{{ url('medias_photo_periode', {periode: 'du-jour'}) }}">Voir les photos du jour</a> <a href="{{ url('medias_photo_periode', {periode: 'de-la-semaine'}) }}">Voir les photos de la semaine</a> <a href="{{ url('medias_photo_periode', {periode: 'du-mois'}) }}">Voir les photos du mois</a>
        {% endif %}
        &nbsp;&nbsp;<a class="btn button dark" data-clipboard-text="<iframe src='{{ url(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')) }}' height='400px' width='600px'></iframe>">
            Partager par iframe (clique pour copier le lien)
        </a>
    </i><br><br>

    {% if medias is empty %}
        Il n'y a pas de médias.
    {% else %}
        <ul class="medias">
            {% for media in medias %}
              <li class="media">
                {% include 'components/block/media.html.twig' with {'media': media, 'popup': false} %}
                {% include 'components/block/vote.count.html.twig' with {'media': media} %}
                {% include 'components/block/vote.button.html.twig' with {'media': media} %}
              </li>
            {% endfor %}
        </ul>
    {% endif %}

{% endblock %}

{% block javascripts %}
  {% include 'components/block/vote.js.html.twig' %}
{% endblock %}
